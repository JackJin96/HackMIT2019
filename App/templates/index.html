{% extends "bootstrap/base.html" %}

{% block styles %}
{{super()}}
<link rel="stylesheet" type="text/css" href="../static\index.css">
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
{% endblock %}

{% block scripts %}
{{super()}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js"></script>
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<script type="text/javascript">
  var socket = null;
  function closeSocket() {
    socket.emit('my event', {
      status: 'close'
    });
    socket.close();
  }
  var toolbarOptions = [
  ['bold', 'italic', 'underline', 'strike'],        // toggled buttons
  ['blockquote', 'code-block'],

  [{ 'header': 1 }, { 'header': 2 }],               // custom button values
  [{ 'list': 'ordered'}, { 'list': 'bullet' }],
  [{ 'script': 'sub'}, { 'script': 'super' }],      // superscript/subscript
  [{ 'indent': '-1'}, { 'indent': '+1' }],          // outdent/indent
  [{ 'direction': 'rtl' }],                         // text direction

  [{ 'size': ['small', false, 'large', 'huge'] }],  // custom dropdown
  [{ 'header': [1, 2, 3, 4, 5, 6, false] }],

  [{ 'color': ['white'] }, { 'background': [] }],          // dropdown with defaults from theme
  [{ 'font': [] }],
  [{ 'align': [] }],

  ['clean']                                         // remove formatting button
];
  var quill = new Quill('#editor', {
    modules: {
    toolbar: toolbarOptions
  },
    theme: 'snow'
  });
  function openSocket() {
    socket = io.connect('http://' + document.domain + ':' + location.port);
    socket.on('connect', function() {
      console.log("connected");
      socket.emit('my event', {
        status: 'open'
      });
    });
    socket.on('my data', function( msg ) {
      console.log( msg );
      if( typeof msg.content !== 'undefined' && msg.content.length > 0 ) {
        // let [line, offset] = quill.getLine(10);
        // let index = quill.getIndex(line);
        $( 'h3' ).remove();
        $( 'div.message_holder' ).empty();
        $( 'div.message_holder' ).append( '<div><b style="color: #000">' + msg.content + '</div>' );
        if (msg.type === "final") {
          quill.insertText(quill.getLength(), msg.content);
        }
      }
    });
  }
</script>
{% endblock %}

{% block content %}
<!-- <div class="container">
<div class="buttons">
  <div class="row">
    <button type="button" class="btn btn-default btn-lg" onclick="openSocket()">
      <span class="glyphicon glyphicon-play" aria-hidden="true"></span> Record
    </button>
    <button type="button" class="btn btn-default btn-lg" onclick="closeSocket()">
      <span class="glyphicon glyphicon-stop" aria-hidden="true"></span> Stop
    </button>
  </div>
</div>
<div class="row">
    <h3 style='color: #ccc;font-size: 30px;'>No message yet..</h3>
    <div class="final_message"></div>
    <div class="message_holder"></div>
</div>
<div class="row">
  <div id="editor">
    <p>Here are your transcriptions:</p>
    <p><br></p>
  </div>
</div>
</div> -->

<div class="site-wrapper">

    <div class="site-wrapper-inner">

      <div class="cover-container">

        <div class="masthead clearfix">
          <div class="inner">
            <h3 class="masthead-brand">Cover</h3>
            <nav>
              <ul class="nav masthead-nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#">Features</a></li>
                <li><a href="#">Contact</a></li>
              </ul>
            </nav>
          </div>
        </div>

        <div class="inner cover">
          <h1 class="cover-heading">Cover your page.</h1>
          <p class="lead">Cover is a one-page template for building simple and beautiful home pages. Download, edit the text, and add your own fullscreen background photo to make it your own.</p>
          <p class="lead">
            <a href="#" class="btn btn-lg btn-default">Learn more</a>
          </p>
        </div>

        <div class="buttons">
          <div class="row">
            <button type="button" class="btn btn-default btn-lg" onclick="openSocket()">
              <span class="glyphicon glyphicon-play" aria-hidden="true"></span> Record
            </button>
            <button type="button" class="btn btn-default btn-lg" onclick="closeSocket()">
              <span class="glyphicon glyphicon-stop" aria-hidden="true"></span> Stop
            </button>
          </div>
        </div>
        <div class="row">
            <h3 style='color: #ccc;font-size: 30px;'>No message yet..</h3>
            <div class="final_message"></div>
            <div class="message_holder"></div>
        </div>
          <div id="editor">
            <p>Here are your transcriptions:</p>
            <p><br></p>
          </div>
        </div>

        <div class="mastfoot">
          <div class="inner">
            <p>Created at HackMIT2019.</p>
          </div>
        </div>

      </div>

    </div>

{% endblock %}



